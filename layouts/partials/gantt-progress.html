{{/*
  Display a simple progress bar showing the percentage of completed
  tasks for the current project. This shortcode is used from
  `project-list.html` and should not rely on the more complex partial
  that renders a Gantt chart.
*/}}

{{ $total := len .Pages }}
{{ $completed := len (where .Pages "Params.status" "completed") }}
{{ $progress := 0 }}
{{ if gt $total 0 }}
  {{ $progress = div (mul $completed 100) $total }}
{{ end }}

<div
  class="progress"
  role="progressbar"
  aria-valuenow="{{ $progress }}"
  aria-valuemin="0"
  aria-valuemax="100"
  style="--progress-value: {{ $progress }}%;"
>
  <div class="progress-bar"></div>
</div>
<div class="progress-label">{{ $progress }}%</div>
